#!/bin/bash

i=1
count=$#

if ! command -v magick &> /dev/null
then
    echo "ðŸª„ Can't find imagemagick!"
    exit 1
fi

while [ $i -le $count ]
do
  echo "ðŸ”³ Squaring $1 â†’ square_$1"

  read -r width height < <(identify -format "%w %h" "$1")
  max_dimension=$((width > height ? width : height))
  magick "$1" -gravity center -background white -extent "${max_dimension}x${max_dimension}" "square_$1"

  i=$((i + 1))
  shift 1
done
